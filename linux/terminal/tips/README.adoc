= Astuces pour le terminal Linux
//
:toc:
:sectnums:

Les astuces sont classées par ordre d'importance.

== Compléter le texte

Utiliser Tab.

== Retaper la commande précédente précédée de sudo

[source, bash]
----
$ command
Erreur
$ sudo !!
$ sudo command
----
== Aller au début de la ligne

`Ctrl + A`

//image::moving_cli.png[]

== Aller au bout de la ligne

`Ctrl + E`

== Couper tout ce qui est à droite du curseur

`Ctrl + U`

== Couper tout ce qui est à gauche du curseur

`Ctrl + K`

== Quitter (le terminal ou la session)

`Ctrl + D`

== Nettoyer le terminal

`Ctrl + L`

== Exécuter deux commandes d'affilée si la première a réussi

`command1 && command2`

== Retaper l'argument précédent

`cat file`

`vim !$`

== Afficher le contenu d'un fichier entre deux lignes

`cat file | sed -n '4,45p'`

== Afficher certaines colonnes d'une sortie

La commande suivante permet d'affficher la 2e, la 3e et la dernière colonne de la sortie de la commande `date`.

`date | awk '{print $2, $3, $NF}'`

== Chercher

`find ./ -name "*.page" -type f -print0`

La commande permet de trouver les fichiers (`-type f`) dont le nom termine par `.page` (`-name "*.page"`), dans le dossier courant (`./`) en n'interprétant pas les espaces comme la fin du nom du fichier (`-print0`).

== Afficher le contenu d'un CSV (awk ultime)

Voici le contenu de fichier.txt :

[source,bash]
----
A1;B1;C1;D1;10
A2;B2;C2;D2;1
A3;B3;C3;D3;10
----


Pour afficher :

- une en-tête ;
- la deuxième et la dernière colonne et seulement pour les lignes pour lesquelles la dernière colonne est supérieure à 10 ;
- un pied ;
en précisant que le délimiteur d'entrée est `;` et celui de sortie `,`.
[source,bash]
----
awk -F";" 'BEGIN {OFS=","; print "En-tete\n--------"} $NF >= 10 {print $2, $NF} END {print "----------\nPied"}' test.txt
----

== Extraire les lignes avec des adresses IP

`grep -Eo '([0-9]{1,3}\.){3}[0-9]{1,3}' fichier.txt`
